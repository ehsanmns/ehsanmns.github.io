<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact | Ehsan Mansouri</title>
<style>
/* ---------- GENERAL ---------- */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:"Segoe UI",sans-serif; background:#0b0f19; color:#e6e6e6; scroll-behavior:smooth; }
a { text-decoration:none; color:inherit; }
.container { max-width:1200px; margin:100px auto; padding:0 20px; }

/* ---------- NAVBAR ---------- */
nav {
  position:fixed; top:0; width:100%; background:rgba(10,15,30,0.85); backdrop-filter:blur(10px);
  padding:15px 40px; z-index:1000;
}
nav ul { display:flex; gap:30px; list-style:none; justify-content:center; }
nav a { color:#cfd8ff; font-weight:500; transition:0.3s; }
nav a:hover { color:#6ea8ff; }

/* ---------- TITLE ---------- */
h1 { text-align:center; margin-bottom:80px; font-size:2.8rem; background:linear-gradient(90deg,#4da3ff,#ffffff,#4da3ff);
background-size:300% 300%; -webkit-background-clip:text; -webkit-text-fill-color:transparent; animation:titleGlow 6s ease-in-out infinite;}
@keyframes titleGlow{0%{background-position:0%}50%{background-position:100%}100%{background-position:0%}}

/* ---------- GRAPH ---------- */
.graph-container {
  position: relative;
  height: 600px;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

#graph-svg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

.node {
  position: absolute;
  width: 120px;
  height: 120px;
  background: #12182b;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 20px rgba(79,124,255,0.3);
  animation: float 6s ease-in-out infinite;
}

.node:hover {
  transform: scale(1.1);
  box-shadow: 0 0 30px rgba(79,124,255,0.5);
}

#central-node {
  width: 150px;
  height: 150px;
  font-size: 1.2rem;
  animation: neonPulse 2.5s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}

@keyframes neonPulse {
  0%,100%{box-shadow:0 0 15px #4f7cff;color:#6ea8ff;}
  50%{box-shadow:0 0 30px #4f7cff;color:#ffffff;}
}

/* Neon animation for lines */
@keyframes lineNeon {
  0%, 100% {
    filter: drop-shadow(0 0 5px #4f7cff);
    stroke: #4f7cff;
  }
  50% {
    filter: drop-shadow(0 0 15px #6ea8ff);
    stroke: #6ea8ff;
  }
}

.neon-line {
  animation: lineNeon 2.5s ease-in-out infinite;
}

/* Slight random float variation for each node */
.node:nth-child(2) { animation-duration: 7s; }
.node:nth-child(3) { animation-duration: 5s; animation-delay: 1s; }
.node:nth-child(4) { animation-duration: 6.5s; animation-delay: 2s; }
.node:nth-child(5) { animation-duration: 5.5s; animation-delay: 0.5s; }
.node:nth-child(6) { animation-duration: 7.5s; animation-delay: 1.5s; }

/* ---------- MODAL ---------- */
.modal { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.85); backdrop-filter: blur(6px); justify-content:center; align-items:center; z-index:2000; }
.modal-content { background:#0f1425; padding:30px; border-radius:20px; max-width:700px; width:90%; position:relative; animation:pop 0.4s ease; box-shadow:0 0 30px #4f7cff; }
@keyframes pop{ from{transform:scale(0.9);opacity:0;} to{transform:scale(1);opacity:1;} }
.close { position:absolute; top:15px; right:20px; font-size:28px; cursor:pointer; color:#aaa; }
.close:hover { color:white; }
.modal a { display:inline-block; margin-top:20px; padding:10px 20px; border-radius:12px; background:#4f7cff; color:white; font-weight:500; text-decoration:none; }

/* ---------- RESPONSIVE ---------- */
@media(max-width:768px){
  .graph-container { height: 800px; }
  .node { width: 100px; height: 100px; font-size: 0.9rem; }
  #central-node { width: 120px; height: 120px; font-size: 1rem; }
}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav>
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="publications.html">Publications</a></li>
    <li><a href="projects.html">Projects</a></li>
    <li><a href="contact.html">Contact</a></li>
  </ul>
</nav>

<div class="container">
<h1>Contact Me</h1>
<div class="graph-container" id="graph">
  <svg id="graph-svg"></svg>
  <div class="node" id="central-node">Ehsan Mansouri</div>
  <div class="node" id="email-node">Email</div>
  <div class="node" id="github-node">GitHub</div>
  <div class="node" id="linkedin-node">LinkedIn</div>
  <div class="node" id="youtube-node">YouTube</div>
  <div class="node" id="scholar-node">Google Scholar</div>
</div>
</div>

<!-- MODAL for Email -->
<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">Ã—</span>
    <h2 id="modalTitle"></h2>
    <p id="modalText"></p>
  </div>
</div>

<script>
// ---------- DATA ----------
const links = {
  email: { text: 'ehsanmansouri128@gmail.com', isLink: false },
  github: { text: 'GitHub Profile', link: 'https://github.com/ehsanmns', isLink: true },
  linkedin: { text: 'LinkedIn Profile', link: 'https://www.linkedin.com/in/ehsanmansouri93/', isLink: true },
  youtube: { text: 'YouTube Channel', link: 'https://www.youtube.com/@clickfixhq', isLink: true },
  scholar: { text: 'Google Scholar', link: 'https://scholar.google.com/citations?hl=en&user=uozvMBkAAAAJ', isLink: true }
};

// ---------- SETUP GRAPH ----------
const graph = document.getElementById('graph');
const svg = document.getElementById('graph-svg');
const centralNode = document.getElementById('central-node');
const nodes = {
  email: document.getElementById('email-node'),
  github: document.getElementById('github-node'),
  linkedin: document.getElementById('linkedin-node'),
  youtube: document.getElementById('youtube-node'),
  scholar: document.getElementById('scholar-node')
};

const nodeKeys = Object.keys(nodes);
const radius = 200; // Distance from center
const angles = [0, 72, 144, 216, 288]; // 360/5 for pentagon-like

// Original positions
const originalPositions = {};

// Function to position nodes
function positionNodes() {
  const centerX = graph.offsetWidth / 2;
  const centerY = graph.offsetHeight / 2;
  centralNode.style.left = `${centerX - centralNode.offsetWidth / 2}px`;
  centralNode.style.top = `${centerY - centralNode.offsetHeight / 2}px`;

  nodeKeys.forEach((key, i) => {
    const angle = angles[i] * Math.PI / 180;
    const x = centerX + radius * Math.cos(angle) - nodes[key].offsetWidth / 2;
    const y = centerY + radius * Math.sin(angle) - nodes[key].offsetHeight / 2;
    nodes[key].style.left = `${x}px`;
    nodes[key].style.top = `${y}px`;
    originalPositions[key] = { x, y };
  });
}

// Function to draw lines
function drawLines() {
  svg.innerHTML = ''; // Clear previous
  const centralRect = centralNode.getBoundingClientRect();
  const graphRect = graph.getBoundingClientRect();
  const cx = centralRect.left + centralRect.width / 2 - graphRect.left;
  const cy = centralRect.top + centralRect.height / 2 - graphRect.top;

  nodeKeys.forEach(key => {
    const nodeRect = nodes[key].getBoundingClientRect();
    const nx = nodeRect.left + nodeRect.width / 2 - graphRect.left;
    const ny = nodeRect.top + nodeRect.height / 2 - graphRect.top;

    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', cx);
    line.setAttribute('y1', cy);
    line.setAttribute('x2', nx);
    line.setAttribute('y2', ny);
    line.setAttribute('stroke-width', '2');
    line.setAttribute('stroke-dasharray', '5,5');
    line.classList.add('neon-line');
    svg.appendChild(line);
  });
}

// Initial setup
positionNodes();
drawLines();

// Resize handler
window.addEventListener('resize', () => {
  positionNodes();
  drawLines();
});

// ---------- DRAG FUNCTIONALITY ----------
let isDragging = false;
let currentNode = null;
let startX, startY, startMouseX, startMouseY;
let dragThreshold = 5; // Pixels to consider as drag vs click

nodeKeys.forEach(key => {
  const node = nodes[key];
  node.addEventListener('mousedown', (e) => {
    isDragging = true;
    currentNode = key;
    startX = parseFloat(node.style.left);
    startY = parseFloat(node.style.top);
    startMouseX = e.clientX;
    startMouseY = e.clientY;
    document.body.style.cursor = 'grabbing';
  });
});

document.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  const dx = e.clientX - startMouseX;
  const dy = e.clientY - startMouseY;
  const node = nodes[currentNode];
  node.style.left = `${startX + dx}px`;
  node.style.top = `${startY + dy}px`;
  drawLines(); // Update lines dynamically
});

document.addEventListener('mouseup', (e) => {
  if (!isDragging) return;
  isDragging = false;
  document.body.style.cursor = 'default';
  const dx = e.clientX - startMouseX;
  const dy = e.clientY - startMouseY;
  const distance = Math.sqrt(dx*dx + dy*dy);

  if (distance < dragThreshold) {
    // Treat as click
    handleClick(currentNode);
  } else {
    // Animate back
    animateBack(currentNode);
  }
  currentNode = null;
});

// Function to animate back to original position
function animateBack(key) {
  const node = nodes[key];
  const targetX = originalPositions[key].x;
  const targetY = originalPositions[key].y;
  const currentX = parseFloat(node.style.left);
  const currentY = parseFloat(node.style.top);
  const duration = 500; // ms
  const startTime = performance.now();

  function animate(time) {
    const elapsed = time - startTime;
    const progress = Math.min(elapsed / duration, 1);
    const ease = progress * (2 - progress); // Ease out
    node.style.left = `${currentX + (targetX - currentX) * ease}px`;
    node.style.top = `${currentY + (targetY - currentY) * ease}px`;
    drawLines();
    if (progress < 1) requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}

// ---------- CLICK HANDLER ----------
function handleClick(key) {
  const data = links[key];
  if (data.isLink) {
    window.open(data.link, '_blank');
  } else {
    // Show modal for email
    openModal('Email', data.text);
  }
}

// ---------- MODAL ----------
function openModal(title, text) {
  document.getElementById("modal").style.display = "flex";
  document.getElementById("modalTitle").innerHTML = title;
  document.getElementById("modalText").innerHTML = text;
}
function closeModal(){ document.getElementById("modal").style.display="none"; }
</script>
</body>
</html>
